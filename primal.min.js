/*! primal.js 2013-11-14 */
var primal=function(){var a=function(){};return a.version="0.0.1",a.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)},a.observable=function(b,c){function d(a){return a.replace(/^on([A-Z])/,function(a,b){return b.toLowerCase()})}return b.$events={},c=c?c.prototype:b,c.$isObservable?void 0:(c.$isObservable=!0,c.addEvent=function(b,c){return a.isFunction(c)?(b=d(b),(this.$events[b]=this.$events[b]||[]).push(c),this):this},c.addEvents=function(a){for(var b in a)this.addEvent(b,a[b]);return this},c.fireEvent=function(a,b,c){a=d(a);var e=this.$events[a];return e?(b=b instanceof Array?b:[b],e.forEach(function(a){c?setTimeout(function(){a.apply(this,b)},c):a.apply(this,b)},this),this):this},c.removeEvent=function(a,b){a=d(a);var c=this.$events[a],e=c.indexOf(b);return-1!==e&&c.splice(e,1),this},c.removeEvents=function(a){var b;if("object"==typeof a){for(b in a)this.removeEvent(b,a[b]);return this}a&&(a=d(a));for(b in this.$events)if(!a||a==b)for(var c=this.$events[b],e=c.length;e--;)e in c&&this.removeEvent(b,c[e]);return this},b)},a.mediator=function(b,c){return b.$topics={},c=c?c.prototype:b,c.$isObservable?void 0:(c.$isObservable=!0,c.subscribe=function(b,c){return a.isFunction(c)?((this.$topics[b]=this.$topics[b]||[]).push(c),this):this},c.publish=function(a,b,c){var d=this.$topics[a];return d?(b=b instanceof Array?b:[b],d.forEach(function(a){c?setTimeout(function(){a.apply(this,b)},c):a.apply(this,b)},this),this):this},c.unsubscribea=function(a,b){var c=this.$topics[a],d=c.indexOf(b);return-1!==d&&c.splice(d,1),this},b)},a}();